diff -Naurp configure configure
--- configure	2015-02-01 14:51:27.000000000 +0200
+++ configure	2015-02-01 16:08:35.000000000 +0200
@@ -94,6 +94,7 @@ build_config()
 		case $targetos in
 		Darwin)
 		echo "CFLAGS+=-fPIC -D__DARWIN__ `sdl-config --cflags`"
+		echo "CPPFLAGS+=-fPIC -D__DARWIN__ `sdl-config --cflags`"
 		echo "SHFLAGS=-dynamiclib"
 		echo "LDFLAGS+=`sdl-config --libs`"
 		;;
diff -Naurp src/framework/Makefile src/framework/Makefile
--- src/framework/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/framework/Makefile	2015-02-01 14:52:46.000000000 +0200
@@ -100,7 +100,7 @@ $(TARGET): $(OBJS)
 		fi
 
 depend:	$(SRCS)
-	$(CC) -MM $(CFLAGS) $^ 1>.depend
+	$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/melt/Makefile src/melt/Makefile
--- src/melt/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/melt/Makefile	2015-02-01 15:04:09.000000000 +0200
@@ -5,6 +5,8 @@ OBJS = melt.o \
 
 CFLAGS += -I.. $(RDYNAMIC) -DVERSION=\"$(version)\"
 
+CPPFLAGS += -I..
+
 LDFLAGS += -L../framework -lmlt -lpthread
 
 SRCS := $(OBJS:.o=.c)
@@ -23,7 +25,7 @@ $(meltname): $(OBJS)
 		$(CC) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/mlt++/Makefile src/mlt++/Makefile
--- src/mlt++/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/mlt++/Makefile	2015-02-01 15:03:38.000000000 +0200
@@ -20,6 +20,7 @@ LIBFLAGS += -Wl,-soname,$(SONAME)
 endif
 
 CXXFLAGS += -I.. $(RDYNAMIC) -DVERSION=\"$(version)\" -fvisibility=hidden
+CPPFLAGS += -I..
 
 LDFLAGS += -L../framework -lmlt
 ifeq ($(targetos), Linux)
@@ -62,7 +63,7 @@ $(TARGET):	$(OBJS)
 	fi
 
 depend:	$(SRCS)
-	$(CXX) -MM $(CXXFLAGS) $^ 1>.depend
+	$(CXX) -MM $(CPPFLAGS) $^ 1>.depend
 
 clean:
 	$(RM) $(OBJS) $(TARGET) $(NAME) $(SONAME)
diff -Naurp src/modules/avformat/Makefile src/modules/avformat/Makefile
--- src/modules/avformat/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/avformat/Makefile	2015-02-01 15:04:39.000000000 +0200
@@ -1,4 +1,5 @@
 CFLAGS += -I../..
+CPPFLAGS += -I../..
 LDFLAGS += -L../../framework -lmlt -lpthread
 
 include ../../../config.mak
@@ -50,7 +51,7 @@ $(TARGET): $(OBJS)
 	$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-	$(CC) -MM $(CFLAGS) $^ 1>.depend
+	$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 	rm -f .depend
diff -Naurp src/modules/core/Makefile src/modules/core/Makefile
--- src/modules/core/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/core/Makefile	2015-02-01 15:07:37.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../..
+
 LDFLAGS += -L../../framework -lmlt -lm -lpthread
 
 include ../../../config.mak
@@ -68,7 +70,7 @@ composite_line_yuv_mmx.o: composite_line
 	$(CC) -o $@ -c composite_line_yuv_mmx.S
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/decklink/Makefile src/modules/decklink/Makefile
--- src/modules/decklink/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/decklink/Makefile	2015-02-01 15:39:38.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../..
+
 LDFLAGS += -L../../framework -lmlt -lpthread
 
 include ../../../config.mak
@@ -12,14 +14,17 @@ OBJS = consumer_decklink.o \
 
 ifeq ($(targetos), MinGW)
 CFLAGS += -Iwin
+CPPFLAGS += -Iwin
 OBJS += win/DeckLinkAPI_i.o
 LDFLAGS += -lole32
 else
 ifeq ($(targetos), Darwin)
 CFLAGS += -Idarwin
+CPPFLAGS += -Idarwin
 OBJS += darwin/DeckLinkAPIDispatch.o
 else
 CFLAGS += -Ilinux
+CPPFLAGS += -Ilinux
 OBJS += linux/DeckLinkAPIDispatch.o
 endif
 endif
@@ -36,7 +41,7 @@ $(TARGET): $(OBJS)
 		$(CXX) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CXX) -MM $(CFLAGS) $^ 1>.depend
+		$(CXX) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/kdenlive/Makefile src/modules/kdenlive/Makefile
--- src/modules/kdenlive/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/kdenlive/Makefile	2015-02-01 15:40:08.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../..
+
 LDFLAGS += -L../../framework -lmlt
 
 include ../../../config.mak
@@ -23,7 +25,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/motion_est/Makefile src/modules/motion_est/Makefile
--- src/modules/motion_est/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/motion_est/Makefile	2015-02-01 15:40:41.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../.. 
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt -lm
 
 include ../../../config.mak
@@ -22,7 +24,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/normalize/Makefile src/modules/normalize/Makefile
--- src/modules/normalize/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/normalize/Makefile	2015-02-01 15:41:07.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt -lm
 
 include ../../../config.mak
@@ -18,7 +20,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/oldfilm/Makefile src/modules/oldfilm/Makefile
--- src/modules/oldfilm/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/oldfilm/Makefile	2015-02-01 15:41:29.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt -lm
 
 include ../../../config.mak
@@ -22,7 +24,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/plus/Makefile src/modules/plus/Makefile
--- src/modules/plus/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/plus/Makefile	2015-02-01 15:45:00.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt -lm -lpthread
 
 include ../../../config.mak
@@ -29,7 +31,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/plusgpl/Makefile src/modules/plusgpl/Makefile
--- src/modules/plusgpl/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/plusgpl/Makefile	2015-02-01 15:45:24.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt -lm -lpthread
 
 include ../../../config.mak
@@ -28,7 +30,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/resample/Makefile src/modules/resample/Makefile
--- src/modules/resample/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/resample/Makefile	2015-02-01 15:46:54.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt
 
 include ../../../config.mak
@@ -21,7 +23,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/rtaudio/Makefile src/modules/rtaudio/Makefile
--- src/modules/rtaudio/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/rtaudio/Makefile	2015-02-01 15:47:19.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt -lpthread
 
 include ../../../config.mak
@@ -39,7 +41,7 @@ $(TARGET): $(OBJS)
 		$(CXX) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CXX) -MM $(CFLAGS) $^ 1>.depend
+		$(CXX) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/sdl/Makefile src/modules/sdl/Makefile
--- src/modules/sdl/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/sdl/Makefile	2015-02-01 15:48:13.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../.. 
+
 LDFLAGS += -L../../framework -lmlt -lpthread -lm
 
 include ../../../config.mak
@@ -22,6 +24,7 @@ LDFLAGS += -lX11
 endif
 
 CFLAGS += $(shell sdl-config --cflags)
+CPPFLAGS += $(shell sdl-config --cflags)
 
 LDFLAGS += $(shell sdl-config --libs)
 
@@ -43,7 +46,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/sox/Makefile src/modules/sox/Makefile
--- src/modules/sox/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/sox/Makefile	2015-02-01 15:48:41.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../..
+
 LDFLAGS += -L../../framework -lmlt -lm
 
 include ../../../config.mak
@@ -19,7 +21,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/sox/configure src/modules/sox/configure
--- src/modules/sox/configure	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/sox/configure	2015-02-01 16:00:09.000000000 +0200
@@ -21,7 +21,7 @@ then
 		disable_sox=0
 		echo "CFLAGS += $(pkg-config --cflags sox)" > config.mak
 		echo "LDFLAGS += $(pkg-config --libs sox)" >> config.mak
-		[ $(pkg-config --modversion sox | cut -d. -f1) -gt 13 ] && echo "CFLAGS += -DSOX14" >> config.mak
+		[ $(pkg-config --modversion sox | cut -d. -f1) -gt 13 ] && echo "CFLAGS += -DSOX14" >> config.mak && echo "CPPFLAGS += -DSOX14" >> config.mak
 	else
 		which libst-config > /dev/null 2>&1
 		if [ $? -eq 0 ]
diff -Naurp src/modules/videostab/Makefile src/modules/videostab/Makefile
--- src/modules/videostab/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/videostab/Makefile	2015-02-01 16:02:38.000000000 +0200
@@ -1,8 +1,10 @@
 include ../../../config.mak
 
 CFLAGS += -I../..
+CPPFLAGS += -I../..
 ifdef SSE2_FLAGS
 CFLAGS += -msse2
+CPPFLAGS += -msse2
 endif
 
 LDFLAGS += -L../../framework -lmlt -lm
@@ -25,7 +27,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/vmfx/Makefile src/modules/vmfx/Makefile
--- src/modules/vmfx/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/vmfx/Makefile	2015-02-01 16:10:03.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../..
+
 LDFLAGS += -L../../framework -lmlt
 
 include ../../../config.mak
@@ -21,7 +23,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/xine/Makefile src/modules/xine/Makefile
--- src/modules/xine/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/xine/Makefile	2015-02-01 16:10:30.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../../
 
+CPPFLAGS += -I../../
+
 LDFLAGS += -L../../framework -lmlt
 
 include ../../../config.mak
@@ -24,7 +26,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
diff -Naurp src/modules/xml/Makefile src/modules/xml/Makefile
--- src/modules/xml/Makefile	2015-02-01 14:51:27.000000000 +0200
+++ src/modules/xml/Makefile	2015-02-01 16:11:12.000000000 +0200
@@ -1,5 +1,7 @@
 CFLAGS += -I../..
 
+CPPFLAGS += -I../../
+
 LDFLAGS += -L../../framework -lmlt -lpthread
 
 include ../../../config.mak
@@ -12,6 +14,8 @@ OBJS = factory.o \
 
 CFLAGS += $(shell pkg-config libxml-2.0 --cflags)
 
+CPPFLAGS += $(shell pkg-config libxml-2.0 --cflags)
+
 LDFLAGS += $(shell pkg-config libxml-2.0 --libs)
 
 SRCS := $(OBJS:.o=.c)
@@ -22,7 +26,7 @@ $(TARGET): $(OBJS)
 		$(CC) $(SHFLAGS) -o $@ $(OBJS) $(LDFLAGS)
 
 depend:	$(SRCS)
-		$(CC) -MM $(CFLAGS) $^ 1>.depend
+		$(CC) -MM $(CPPFLAGS) $^ 1>.depend
 
 distclean:	clean
 		rm -f .depend
